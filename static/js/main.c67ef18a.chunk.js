(this.webpackJsonpyouquiz=this.webpackJsonpyouquiz||[]).push([[0],{78:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(0),a=n.n(r),i=n(23),s=n.n(i),o=n(12),j=n.n(o),u=n(20),l=n(11),d=n(36);n(73),n(75),n(87);d.a.initializeApp({apiKey:"AIzaSyCMaNAo5wm_-lOYQlRBgGT30ZsWkZMTLAQ",authDomain:"youquiz-9f5ee.firebaseapp.com",databaseURL:"https://youquiz-9f5ee.firebaseio.com",projectId:"youquiz-9f5ee",storageBucket:"youquiz-9f5ee.appspot.com",messagingSenderId:"577615600044",appId:"1:577615600044:web:f174e8ff8050d7e5a8c209",measurementId:"G-GD96BSKTVD"});var b=d.a,h=d.a.auth(),x=d.a.firestore(),O=(d.a.storage(),n(38)),m=n(13),f=(n(78),n(111)),p=n(113),g=n(44),v=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],i=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b.auth.GoogleAuthProvider,a(!0),e.next=4,h.signInWithPopup(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(f.a,{id:"auth-button",container:!0,direction:"row",spacing:1,alignItems:"center",children:[Object(c.jsx)(f.a,{item:!0,xs:12,alignItems:"center",children:Object(c.jsxs)(p.a,{variant:"outlined",onClick:i,fullWidth:!0,children:[" ",Object(c.jsx)(g.b,{})," \xa0 \uad6c\uae00\uc544\uc774\ub514\ub85c \ub85c\uadf8\uc778"]})}),n&&Object(c.jsx)(f.a,{item:!0,xs:12,children:Object(c.jsx)("h2",{children:"\uc7a0\uc2dc \uae30\ub2e4\ub824\uc8fc\uc138\uc694..."})})]})})},w=n(119),y=n(123),S=n(124),z=n(121),k=function(e){var t=e.user,n=Object(r.useState)(t.displayName),a=Object(l.a)(n,2),i=a[0],s=a[1],o=Object(r.useState)(t.phoneNumber||""),d=Object(l.a)(o,2),b=d[0],h=d[1],O=Object(r.useState)(!1),g=Object(l.a)(O,2),v=g[0],k=g[1],I=Object(m.f)(),_=function(e){var t=e.target,n=t.name,c=t.value;"name"===n?s(c):"tel"===n&&h(c.replace("-",""))},q=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("userinfo").add({uid:t.uid,name:i,tel:b,isAdmin:!1});case 2:alert("\uac00\uc785\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),k(!0),I.go(0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)(c.Fragment,{children:v?Object(c.jsx)(w.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!0,autoHideDuration:6e3,message:"\uc0c8\ub85c\uace0\uce68\ud558\uba74 \ud034\uc988 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ub429\ub2c8\ub2e4."}):Object(c.jsx)("form",{id:"auth-form",children:Object(c.jsxs)(f.a,{container:!0,direction:"row",spacing:2,alignItems:"center",children:[Object(c.jsx)(f.a,{item:!0,xs:12,children:Object(c.jsx)("h2",{children:" \uc774\ub984\uacfc \uc804\ud654\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694. \uc774 \uc815\ubcf4\ub294 \ucd94\ucca8\uc744 \ud1b5\ud574 \uc120\ubb3c\uc744 \ubcf4\ub0b4\ub4dc\ub9ac\uae30 \uc704\ud55c \uc815\ubcf4\ub85c, \uaf2d \uc785\ub825\ud558\uc9c0 \uc54a\uc544\ub3c4 \ub429\ub2c8\ub2e4.  "})}),Object(c.jsx)(f.a,{item:!0,xs:12,md:5,children:Object(c.jsxs)(y.a,{children:[Object(c.jsx)(S.a,{htmlFor:"name-input",children:"\uc774\ub984"}),Object(c.jsx)(z.a,{id:"name-input",type:"text","aria-describedby":"name-helper",name:"name",onChange:_,value:i})]})}),Object(c.jsx)(f.a,{item:!0,xs:12,md:5,children:Object(c.jsxs)(y.a,{children:[Object(c.jsx)(S.a,{htmlFor:"tel-input",children:"\uc804\ud654\ubc88\ud638"}),Object(c.jsx)(z.a,{id:"tel-input",type:"tel","aria-describedby":"tel-helper",name:"tel",onChange:_,value:b})]})}),Object(c.jsx)(f.a,{item:!0,xs:12,md:2,children:Object(c.jsx)(p.a,{onClick:q,variant:"contained",color:"primary",children:"\ud655\uc778"})})]})})})},I=n(54),_=n(114),q=n(125),A=n(115),W=n(120),N=function(e){var t=e.quizs,n=e.currentQuiz,r=e.showAnswer,a=t[n],i=a.no,s=a.question,o=a.answer,j={stepper:{padding:"1%",background:"inherit"}};return Object(c.jsxs)(_.a,{id:"quiz",variant:"outlined",children:[Object(c.jsx)("div",{className:"quiz-timeline",children:Object(c.jsx)(q.a,{activeStep:n,alternativeLabel:!0,style:j.stepper,children:t.map((function(e,t){return Object(c.jsx)(A.a,{children:Object(c.jsx)(W.a,{style:j.stepLabel})},t)}))})}),Object(c.jsxs)("div",{className:"title",children:[" Q",i,". "]}),Object(c.jsx)("div",{className:"question",dangerouslySetInnerHTML:{__html:s}}),Object(c.jsxs)("div",{className:"answer",children:["\uc815\ub2f5 : \xa0\xa0",r?Object(c.jsx)("b",{children:o[0]}):"???"]})]})},C=n(58),F=n(116),Q=function(e){var t=e.no,n=e.user,a=e.doc_user_id,i=n.uid,s=n.name,o=Object(r.useState)(""),d=Object(l.a)(o,2),b=d[0],h=d[1],O=function(){var e=Object(u.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={uid:i,name:s,answer:b},e.next=3,x.collection("quiz_"+t).add(n);case 3:return e.next=5,x.collection("userinfo").doc(a).update(Object(C.a)({},"quiz_"+t,!0));case 5:alert("\uc815\ub2f5\uc774 \uc81c\ucd9c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)(_.a,{id:"submitAnswer",variant:"outlined",children:Object(c.jsxs)(f.a,{container:!0,direction:"row",spacing:2,alignItems:"center",children:[Object(c.jsx)(f.a,{item:!0,xs:9,children:Object(c.jsxs)(y.a,{fullWidth:!0,children:[Object(c.jsx)(S.a,{htmlFor:"ans-input",children:"\uc815\ub2f5"}),Object(c.jsx)(z.a,{id:"ans-input",type:"text","aria-describedby":"ans-helper",name:"answer",onChange:function(e){var t=e.target.value;h(t)},value:b}),Object(c.jsx)(F.a,{id:"ans-helper",children:" \uc81c\ucd9c \ud6c4\uc5d0\ub294 \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4!"})]})}),Object(c.jsx)(f.a,{item:!0,xs:3,children:Object(c.jsx)(p.a,{onClick:O,fullWidth:!0,variant:"contained",color:"primary",children:"\uc81c\ucd9c"})})]})})},B=function(e){var t=e.participants,n=e.corrects;return Object(c.jsx)(_.a,{id:"board",variant:"outlined",children:Object(c.jsxs)(f.a,{container:!0,direction:"row",spacing:2,children:[Object(c.jsx)(f.a,{item:!0,xs:6,children:Object(c.jsxs)("div",{className:"board-count",children:[Object(c.jsx)(g.c,{size:"20"}),"\xa0 \ucc38\uc5ec ",t]})}),Object(c.jsx)(f.a,{item:!0,xs:6,children:Object(c.jsxs)("div",{className:"board-count",children:[Object(c.jsx)(g.a,{size:"20"}),"\xa0 \uc815\ub2f5 ",n]})})]})})},E=n(117),L=n(118),D=n(122),G=function(e){var t=e.wrongs,n=e.isAdmin,r=e.showWrongs;return Object(c.jsx)(_.a,{id:"wrongs",variant:"outlined",children:Object(c.jsxs)(f.a,{container:!0,direction:"column",spacing:1,children:[Object(c.jsxs)(f.a,{item:!0,container:!0,direction:"row",children:[Object(c.jsx)(f.a,{item:!0,xs:6,children:Object(c.jsxs)("h3",{children:["\uc624\ub2f5 ",t.length," "]})}),n&&Object(c.jsx)(f.a,{item:!0,xs:6,children:Object(c.jsx)(E.a,{children:Object(c.jsx)(L.a,{control:Object(c.jsx)(D.a,{checked:r,onChange:function(){x.collection("current").doc("current").update({showWrongs:!r})},name:"showWrongs"}),label:r?"\uc624\ub2f5 \uc228\uae30\uae30":"\uc624\ub2f5 \ubcf4\uae30"})})})]}),r?t.map((function(e,t){return Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)(_.a,{className:"wrongs-wrong",variant:"elevation",elevation:2,children:Object(c.jsxs)("h3",{children:[" ",e.answer," "]})})},t)})):Object(c.jsx)(f.a,{item:!0,children:Object(c.jsx)("h4",{align:"center",children:"\uc5b4\ub5a4 \uc624\ub2f5\ub4e4\uc774 \uc788\uc744\uae4c\uc694?"})})]})})},M=(n(83),function(e){var t=e.user,n=e.doc_user_id,a=e.currentInfo,i=t.isAdmin,s=a.currentQuiz,o=a.showAnswer,d=a.showWrongs,b=Object(r.useState)([]),h=Object(l.a)(b,2),m=h[0],g=h[1],v=Object(r.useState)(!1),w=Object(l.a)(v,2),y=w[0],S=w[1],z=Object(r.useState)(0),k=Object(l.a)(z,2),_=k[0],q=k[1],A=Object(r.useState)(0),W=Object(l.a)(A,2),C=W[0],F=W[1],E=Object(r.useState)([]),L=Object(l.a)(E,2),D=L[0],M=L[1],T=function(e){x.collection("current").doc("current").update({currentQuiz:e})},H=function(e){x.collection("current").doc("current").update({showAnswer:e})},J=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.length){e.next=2;break}return e.abrupt("return");case 2:S(t["quiz_"+m[s].no]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e,t){return t.includes(e)};return Object(r.useEffect)(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("quiz").orderBy("no").get();case 2:t=e.sent,g(t.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)}))),[]),Object(r.useEffect)((function(){J()}),[m,s,t]),Object(r.useEffect)(Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.length){e.next=2;break}return e.abrupt("return");case 2:return t=m[s].no,e.next=5,x.collection("quiz").where("no","==",t).get();case 5:n=e.sent.docs[0].data().answer,x.collection("quiz_"+t).onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));q(t.length);var c=[],r=[];t.map((function(e){K(e.answer,n)?c=[].concat(Object(I.a)(c),[e]):r=[].concat(Object(I.a)(r),[e])})),F(c.length),M(r)}));case 7:case"end":return e.stop()}}),e)}))),[m,s]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(f.a,{container:!0,direction:"row",spacing:2,alignItems:"stretch",children:[Object(c.jsxs)(f.a,{container:!0,item:!0,xs:12,md:8,direction:"row",children:[Object(c.jsx)(f.a,{item:!0,xs:12,children:m.length?Object(c.jsx)(N,{quizs:m,currentQuiz:s,showAnswer:o}):Object(c.jsx)("h6",{children:"\ud034\uc988\ub97c \uac00\uc838\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."})}),i&&Object(c.jsxs)(f.a,{id:"admin-button-box",container:!0,item:!0,xs:12,direction:"row",justify:"flex-end",alignItems:"center",children:[s>0&&Object(c.jsx)(f.a,{item:!0,xs:6,md:3,children:Object(c.jsx)(p.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){T(s-1),H(!1),x.collection("current").doc("current").update({showWrongs:!1})},children:"\uc774\uc804 \ubb38\uc81c"})}),Object(c.jsx)(f.a,{item:!0,xs:6,md:3,children:o?s+1<m.length?Object(c.jsx)(p.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){T(s+1),H(!1),x.collection("current").doc("current").update({showWrongs:!1})},children:"\ub2e4\uc74c \ubb38\uc81c"}):Object(c.jsx)(O.b,{to:"/draw",children:Object(c.jsx)(p.a,{variant:"contained",color:"primary",fullWidth:!0,children:"\ucd94\ucca8"})}):Object(c.jsx)(p.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:function(){return H(!0)},children:"\uc815\ub2f5 \uacf5\uac1c"})})]}),Object(c.jsx)(f.a,{item:!0,xs:12,children:m.length&&!o&&(y?Object(c.jsx)("div",{className:"already-submit-message",children:Object(c.jsx)("h4",{align:"center",children:"\uc815\ub2f5\uc744 \uc81c\ucd9c\ud558\uc168\uc2b5\ub2c8\ub2e4."})}):Object(c.jsx)(Q,{no:m[s].no,user:t,doc_user_id:n}))}),Object(c.jsx)(f.a,{item:!0,xs:12,children:m.length&&Object(c.jsx)(B,{participants:_,corrects:C})})]}),Object(c.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(c.jsx)(G,{wrongs:D,isAdmin:i,showWrongs:d})})]})})}),T=(n(84),function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)([]),s=Object(l.a)(i,2),o=s[0];s[1];Object(r.useEffect)(Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("userinfo").get();case 2:t=e.sent,n=t.docs.map((function(e){return e.data()})).filter((function(e,t){return t<15})),a(n);case 5:case"end":return e.stop()}}),e)}))),[]);var d=function(e){return e.length<=1?e:2==e.length?e[0]+"*":3==e.length?e[0]+"*"+e[2]:e[0]+"**"+e[e.length-1]},b=function(e){return e.length<=4?e:"***-****-"+e.slice(-4)},h=function(e){var t=e.peopleInfo;return Object(c.jsx)(_.a,{className:"people",variant:"elevation",elevation:3,children:Object(c.jsx)(f.a,{container:!0,direction:"row",spacing:1,children:t.map((function(e,t){var n=e.name,r=e.tel;return Object(c.jsx)(f.a,{item:!0,xs:12,children:Object(c.jsx)(_.a,{variant:"elevation",elevation:1,children:Object(c.jsxs)(f.a,{container:!0,children:[Object(c.jsxs)(f.a,{item:!0,xs:5,children:[" ",d(n)," "]}),Object(c.jsxs)(f.a,{item:!0,xs:7,children:[" ",b(r)," "]})]})})},t)}))})})};return Object(c.jsxs)(f.a,{container:!0,direction:"row",spacing:2,alignItems:"center",children:[Object(c.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(c.jsx)(h,{peopleInfo:n})}),Object(c.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(c.jsx)(_.a,{className:"draw",variant:"elevation",elevation:3,children:"\ucd94\ucca8"})}),Object(c.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(c.jsx)(_.a,{className:"people",variant:"elevation",elevation:3,children:Object(c.jsx)(h,{peopleInfo:o})})})]})}),H=function(e){var t=e.isLoggedIn,n=e.user,r=e.hasAccount,a=e.doc_user_id,i=e.currentInfo;return Object(c.jsx)(O.a,{children:Object(c.jsx)(m.c,{children:t?r?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(m.a,{exact:!0,path:"/",children:Object(c.jsx)(M,{user:n,doc_user_id:a,currentInfo:i})}),n.isAdmin&&Object(c.jsx)(m.a,{exact:!0,path:"/draw",children:Object(c.jsx)(T,{})})]}):Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(m.a,{exact:!0,path:"/",children:Object(c.jsx)(k,{user:n})})}):Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(m.a,{exact:!0,path:"/",children:Object(c.jsx)(v,{})})})})})};var J=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(null),s=Object(l.a)(i,2),o=s[0],d=s[1],b=Object(r.useState)(!1),O=Object(l.a)(b,2),m=O[0],f=O[1],p=Object(r.useState)(""),g=Object(l.a)(p,2),v=g[0],w=g[1],y=Object(r.useState)({currentQuiz:0,showWrongs:!1}),S=Object(l.a)(y,2),z=S[0],k=S[1];return Object(r.useEffect)((function(){h.onAuthStateChanged(function(){var e=Object(u.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,x.collection("userinfo").where("uid","==",t.uid).get();case 3:n=e.sent,f(Boolean(n.docs.length));try{d(n.docs[0].data()),w(n.docs[0].id)}catch(c){d(t)}e.next=9;break;case 8:d(null);case 9:a(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x.collection("current").doc("current").onSnapshot((function(e){k(e.data())}))}),[]),Object(r.useEffect)((function(){v&&x.collection("userinfo").doc(v).onSnapshot((function(e){d(e.data())}))}),[v]),Object(c.jsx)(c.Fragment,{children:n?Object(c.jsx)(H,{isLoggedIn:Boolean(o),user:o,hasAccount:m,doc_user_id:v,currentInfo:z}):"\ub85c\ub529\uc911\uc785\ub2c8\ub2e4!"})};n(85);s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(J,{})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.c67ef18a.chunk.js.map